{"version":3,"sources":["webpack://grapesjs-rally-widgets/webpack/universalModuleDefinition","webpack://grapesjs-rally-widgets/webpack/bootstrap","webpack://grapesjs-rally-widgets/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://grapesjs-rally-widgets/./src/components.js","webpack://grapesjs-rally-widgets/./src/blocks.js","webpack://grapesjs-rally-widgets/./src/commands.js","webpack://grapesjs-rally-widgets/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","obj","configurable","writable","editor","opts","domc","DomComponents","pfx","getConfig","getCoinsOptions","coins","map","coin","coinSymbol","idTrait","titleTrait","coinTrait","type","options","coinsList","changeProp","currencyTrait","label","amountTrait","placeholder","min","noteTrait","toolbar","attributes","class","command","e","runCommand","force","draggable","scriptTicker","image","endpoint","change","this","querySelector","price","refreshPrice","fetch","then","res","json","style","display","innerHTML","priceInUSD","toFixed","updatePrice","catch","err","console","log","src","setInterval","scriptDeeplink","currentTab","el","tabs","querySelectorAll","prev","next","steps","link","showTab","length","classList","remove","add","stepIndicator","nextPrev","valid","input","currencyType","amount","note","url","href","deeplink","validate","addEventListener","addType","model","defaults","icon","traits","widgetComponent","extend","rallyUrl","script","components","init","updateCoinImage","on","currentCoinSymbol","currentCoin","find","set","coinImagePath","open","bm","BlockManager","category","content","media","cm","Commands","$","modal","Modal","codeViewer","CodeManager","getViewer","clone","container","importLabel","viewerEditor","copyToClipboard","str","document","createElement","setAttribute","position","left","body","appendChild","select","execCommand","removeChild","btnCopy","val","getValue","trim","iconOrig","html","setTimeout","labelEl","codeName","theme","autoBeautify","autoCloseTags","autoCloseBrackets","styleActiveLine","smartIndent","readOnly","copyViewerOptions","getCode","component","getSelected","toHTML","css","cssc","CssComposer","js","ccid","JSON","stringify","__getScriptProps","getScriptString","run","txtarea","append","setTitle","modalCopyTitle","setContent","getModel","once","stopCommand","id","refresh","stop","close","Storage","loadCommands","loadComponents","loadBlocks"],"mappings":"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","file":"grapesjs-rally-widgets.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"grapesjs-rally-widgets\"] = factory();\n\telse\n\t\troot[\"grapesjs-rally-widgets\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","export default (editor, opts = {}) => {\n  const domc = editor.DomComponents;\n  const pfx = editor.getConfig('stylePrefix');\n\n  const getCoinsOptions = coins => {\n    return coins.map(coin => {\n      const value = coin.coinSymbol;\n      return { value, name: value };\n    });\n  }\n\n  const idTrait = {\n    name: 'id'\n  };\n\n  const titleTrait = {\n    name: 'title'\n  }\n\n  const coinTrait = {\n    type: 'select',\n    name: 'coin',\n    options: getCoinsOptions(opts.coinsList),\n    changeProp: true,\n  }\n\n  const currencyTrait = {\n    type: 'select',\n    name: 'currencyType',\n    label: 'Currency',\n    options: [\n      { value: 'COIN', name: 'COIN' },\n      { value: 'USD', name: 'USD' }\n    ],\n    changeProp: true,\n  }\n\n  const amountTrait = {\n    type: 'number',\n    name: 'amount',\n    placeholder: '10',\n    min: 0,\n    changeProp: true,\n  }\n\n  const noteTrait = {\n    name: 'note',\n    placeholder: 'note...',\n    changeProp: true,\n  }\n\n  const toolbar = [{\n    attributes: {\n      class: 'fa fa-code'\n    },\n    command: 'widget-code'\n  }, {\n    attributes: {\n      class: 'fa fa-arrow-up'\n    },\n    command: e => e.runCommand('core:component-exit', {\n      force: 1\n    })\n  }, {\n    attributes: {\n      class: 'fa fa-arrows gjs-no-touch-actions',\n      draggable: true\n    },\n    command: 'tlb-move'\n  }, {\n    attributes: {\n      class: 'fa fa-clone'\n    },\n    command: 'tlb-clone'\n  }, {\n    attributes: {\n      class: 'fa fa-trash-o'\n    },\n    command: 'tlb-delete'\n  }]\n\n  domc.addType('widget', {\n    model: {\n      defaults: {\n        // Default props\n        icon: '<i class=\"fa fa-puzzle-piece\"></i>',\n        toolbar,\n        traits: [\n          idTrait,\n          titleTrait,\n          coinTrait\n        ],\n        coin: 'SKOT',\n        'script-props': ['coin'],\n      },\n      ...opts.widgetComponent\n    },\n  });\n\n  function scriptTicker({ coin, image, endpoint }) {\n    const el = this;\n    const change = el.querySelector('.change');\n    const price = el.querySelector('.cp');\n    el.querySelector('img').src = image;\n    el.querySelector('.c-name').innerHTML = `$${coin}`;\n    refreshPrice();\n    setInterval(refreshPrice, 60000);\n\n    function refreshPrice() {\n      fetch(endpoint + `creator_coins/${coin}/price`)\n        .then(function (res) { return res.json() })\n        .then(function (res) { updatePrice(res) })\n        .catch(function (err) { console.log(err) });\n    }\n\n    function updatePrice(res) {\n      change.style.display = 'none';\n      price.innerHTML = `$${res.priceInUSD.toFixed(4)}`;\n    }\n  }\n\n  domc.addType('price-ticker', {\n    extend: 'widget',\n    model: {\n      defaults: {\n        // Default props\n        icon: '<i class=\"fa fa-usd\"></i>',\n        image: 'https://images-cc-dev.s3-us-west-2.amazonaws.com/images/SkotLeach_Coin.png',\n        endpoint: opts.rallyUrl,\n        script: scriptTicker,\n        'script-props': ['coin', 'image', 'endpoint'],\n        attributes: {\n          style: 'padding:10px'\n        },\n        components: `<div class=\"pt-container\">\n            <img src=\"img.png\" alt=\"coin-icon\" class=\"pt-icon\"/>\n            <div class=\"pt-meta\">\n              <span class=\"c-name\">COIN</span>\n              <p class=\"cp\">$0.00</p>\n            </div>\n            <div class=\"cp-container\">\n              <svg fill=\"currentColor\" focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\" class=\"indicator rotate green\">\n                <path d=\"M7 10l5 5 5-5z\">\n                </path>\n              </svg>\n              <p class=\"change green\">0.00%</p>\n            </div>\n          </div>\n          <style>\n            .pt-container{\n              display:flex;\n              margin-left: 10px;\n              font-family:Helvetica, sans-serif;\n            }\n            .cp-container{\n              display:flex;\n              align-items:center;\n            }\n            .cp {\n              margin: 0;\n              margin-top: 5px\n            }\n            .pt-meta{\n              display:flex;\n              flex-direction:column;\n              margin-left: 10px;\n            }\n            .pt-icon{\n              width:50px;\n              height:50px;\n              border-radius: 5px;\n            }\n            .c-name{\n              font-weight:700;\n              font-size:20px;\n            }\n            .cp{\n              font-size:25px;\n              font-weight:700;\n            }\n            .indicator{\n              width: 25px;\n              height: 25px;\n            }\n            .red {\n              color: rgb(219, 105, 105);\n            }\n            .green {\n              color: rgb(81, 146, 81);\n            }\n            .rotate {\n              transform: rotate(180deg);\n            }\n          </style>`\n      },\n      init() {\n        this.updateCoinImage();\n        this.on(\"change:coin\", this.updateCoinImage);\n      },\n      updateCoinImage() {\n        const currentCoinSymbol = this.get('coin');\n        const currentCoin = opts.coinsList.find(coin => coin.coinSymbol === currentCoinSymbol);\n        this.set('image', currentCoin.coinImagePath);\n      }\n    },\n  });\n\n  function scriptDeeplink({ coin }) {\n    let currentTab = 0;\n    const el = this;\n    const tabs = el.querySelectorAll('.tab');\n    const prev = el.querySelector('.prev');\n    const next = el.querySelector('.next');\n    const steps = el.querySelectorAll('.step');\n    const link = el.querySelector('a');\n\n    showTab(currentTab);\n    prev.addEventListener('click', function () {\n      nextPrev(-1);\n    });\n    next.addEventListener('click', function () {\n      nextPrev(1);\n    });\n\n    function deeplink() {\n      let currencyType = el.querySelector('select').value;\n      let amount = el.querySelector('input').value;\n      let note = el.querySelector('textarea').value;\n      let url = `https://www.rally.io/creator/${coin}/?inputType=${currencyType}&amount=${amount}`;\n      if (note) {\n        url += `&note=${note}`;\n      }\n      link.href = url;\n      link.innerHTML = url;\n    }\n\n    function showTab(n) {\n      for (let i = 0; i < tabs.length; i++) tabs[i].style.display = 'none';\n      tabs[n].style.display = 'block';\n      if (n === 0) prev.style.display = 'none';\n      else prev.style.display = 'inline';\n      if (n === (tabs.length - 1)) next.style.display = 'none';\n      else next.style.display = 'inline';\n      stepIndicator(n);\n    }\n\n    function stepIndicator(n) {\n      for (let i = 0; i < steps.length; i++) steps[i].classList.remove('active');\n      steps[n].classList.add('active');\n    }\n\n    function nextPrev(n) {\n      if (n === 1 && !validate()) return false;\n      if (currentTab >= tabs.length) return false;\n      currentTab += n;\n      showTab(currentTab)\n    }\n\n    function validate() {\n      let valid = true;\n      input = el.querySelector('input');\n      if (input.value === '') {\n        input.classList.add('invalid');\n        valid = false;\n      }\n      if (valid) steps[currentTab].classList.add('finish');\n      deeplink();\n      return valid;\n    }\n  }\n\n  domc.addType('rally-deeplink', {\n    extend: 'widget',\n    model: {\n      defaults: {\n        // Default props\n        icon: '<i class=\"fa fa-link\"></i>',\n        script: scriptDeeplink,\n        components: `<form action=\"\" class=\"deeplink\">\n            <div class=\"header\">Donate</div>\n            <div class=\"tab\">\n              <p>\n                <select class=\"input\" name=\"currency\" id=\"currency\">\n                  <option value=\"COIN\">COIN</option>\n                  <option value=\"USD\">USD</option>\n                </select>\n              </p>\n              <p><input class=\"input\" type=\"text\" placeholder=\"amount\"/></p>\n            </div>\n            <div class=\"tab\">\n              <p><textarea class=\"input\" name=\"note\" id=\"note\" placeholder=\"optional note...\"></textarea></p>\n            </div>\n            <div class=\"tab\">\n              <a target=\"_blank\" href=\"#\">Link</a>\n            </div>\n            <div>\n              <button data-${pfx}type=\"button-basic\" type=\"button\" class=\"prev\">Prev</button>\n              <button data-${pfx}type=\"button-basic\" type=\"button\" class=\"next\">Next</button>\n            </div>\n            <div><span class=\"step\"></span><span class=\"step\"></span><span class=\"step\"></span></div>\n          </form>\n          <style>\n            .deeplink {\n              background-color: #ffffff;\n              margin: 100px auto;\n              padding: 40px;\n              width: 70%;\n              min-width: 300px\n            }\n\n            .input {\n              padding: 10px;\n              width: 100%;\n              font-size: 17px;\n              border: 1px solid #aaaaaa;\n            }\n\n            .input.invalid {\n              background-color: #ffdddd;\n            }\n\n            .tab {\n              display: none;\n            }\n\n            .step {\n              height: 15px;\n              width: 15px;\n              margin: 0 2px;\n              background-color: #bbbbbb;\n              border: none;\n              border-radius: 50%;\n              display: inline-block;\n              opacity: 0.5;\n            }\n\n            .step.active {\n              opacity: 1\n            }\n\n            .step.finish {\n              background-color: #4caf50;\n            }\n          </style>`\n      },\n    },\n  });\n\n  domc.addType('rally-deeplink-predefined', {\n    extend: 'widget',\n    model: {\n      defaults: {\n        // Default props\n        icon: '<i class=\"fa fa-shopping-cart\"></i>',\n        traits: [\n          idTrait,\n          titleTrait,\n          coinTrait,\n          currencyTrait,\n          amountTrait,\n          noteTrait\n        ],\n        currencyType: 'COIN',\n        amount: 10,\n        note: 'service/product description',\n        'script-props': ['coin', 'currencyType', 'amount', 'note'],\n        script({ coin, currencyType, amount, note }) {\n          this.querySelector('button').addEventListener('click', function () {\n            window.open(`https://www.rally.io/creator/${coin}/?inputType=${currencyType}&amount=${amount}&note=${note}`, '_blank');\n          });\n        },\n        components: `<button data-${pfx}type=\"button-basic\" class=\"btn-rly\">Buy Product</button>\n        <style>\n          .btn-rly {\n            cursor: pointer;\n            padding: 13px 18px;\n            background-color: #424242;\n            font-family: inherit;\n            color: #fff;\n            display: inline-flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 15px;\n            border: 1px solid #e9ebeb;\n            border-bottom-color: #e1e3e3;\n            border-radius: 4px;\n            background-color: #fff;\n            color: rgba(14, 30, 37, .87);\n            box-shadow: 0 2px 4px 0 rgba(14, 30, 37, .12);\n            transition: all .2s ease;\n            transition-property: background-color, color, border, box-shadow;\n            outline: 0;\n            font-weight: 500;\n            background: #f40;\n            color: #fff;\n            border-color: transparent;\n          }\n        </style>`\n      }\n    },\n  });\n\n  domc.addType('rally-buy-coin', {\n    extend: 'widget',\n    model: {\n      defaults: {\n        // Default props\n        icon: '<i class=\"fa fa-credit-card\"></i>',\n        script({ coin }) {\n          this.querySelector('button').addEventListener('click', function () {\n            window.open(`https://www.rally.io/creator/${coin}/`, '_blank');\n          });\n        },\n        components: `<button data-${pfx}type=\"button-basic\" class=\"btn-rly\">Buy Coin</button>\n        <style>\n          .btn-rly {\n            cursor: pointer;\n            padding: 13px 18px;\n            background-color: #424242;\n            font-family: inherit;\n            color: #fff;\n            display: inline-flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 15px;\n            border: 1px solid #e9ebeb;\n            border-bottom-color: #e1e3e3;\n            border-radius: 4px;\n            background-color: #fff;\n            color: rgba(14, 30, 37, .87);\n            box-shadow: 0 2px 4px 0 rgba(14, 30, 37, .12);\n            transition: all .2s ease;\n            transition-property: background-color, color, border, box-shadow;\n            outline: 0;\n            font-weight: 500;\n            background: #f40;\n            color: #fff;\n            border-color: transparent;\n          }\n        </style>`\n      },\n    },\n  });\n};\n","export default (editor, opts = {}) => {\n  const bm = editor.BlockManager;\n\n  bm.add('price-ticker', {\n    category: 'Rally',\n    label: 'Price Ticker',\n    attributes: {\n      class: 'fa fa-usd'\n    },\n    content: { type: 'price-ticker' },\n  });\n\n  bm.add('rally-deeplink-predefined', {\n    category: 'Rally',\n    label: 'Product Button',\n    attributes: {\n      class: 'fa fa-shopping-cart'\n    },\n    content: { type: 'rally-deeplink-predefined' },\n  });\n\n  bm.add('rally-buy-coin', {\n    category: 'Rally',\n    label: 'Buy Coin',\n    attributes: {\n      class: 'fa fa-credit-card'\n    },\n    content: { type: 'rally-buy-coin' },\n  });\n\n  bm.add('rally-deeplink', {\n    category: 'Rally',\n    label: 'Deeplink',\n    content: { type: 'rally-deeplink' },\n    media: '<svg viewBox=\"0 0 16 16\"><path d=\"M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z\"/><path d=\"M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z\"/></svg>'\n  });\n}\n","export default (editor, opts = {}) => {\r\n    const cm = editor.Commands;\r\n    const $ = editor.$;\r\n    const pfx = editor.getConfig('stylePrefix');\r\n    const modal = editor.Modal;\r\n    const codeViewer = editor.CodeManager.getViewer('CodeMirror').clone();\r\n    const container = $('<div></div>');\r\n    let importLabel = 'HTML';\r\n    let viewerEditor = codeViewer.editor;\r\n\r\n    const copyToClipboard = str => {\r\n        const el = document.createElement('textarea');\r\n        el.value = str;\r\n        el.setAttribute('readonly', '');\r\n        el.style.position = 'absolute';\r\n        el.style.left = '-9999px';\r\n        document.body.appendChild(el);\r\n        el.select();\r\n        document.execCommand('copy');\r\n        document.body.removeChild(el);\r\n    };\r\n\r\n    // Init import button\r\n    const btnCopy = $(`<button title=\"Copy\" class=\"gjs-copy-btn\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 21H8V7h11m0-2H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m-3-4H4c-1.1 0-2 .9-2 2v14h2V3h12V1z\"></path></svg>\r\n    </button>`);\r\n    btnCopy.on('click', e => {\r\n        const val = viewerEditor.getValue().trim();\r\n        // Add to clipboard\r\n        const iconOrig = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 21H8V7h11m0-2H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m-3-4H4c-1.1 0-2 .9-2 2v14h2V3h12V1z\"></path></svg>';\r\n        const iconDone = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M21 7L9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7z\"></path></svg>';\r\n        copyToClipboard(val);\r\n        btnCopy.html(iconDone);\r\n        setTimeout(() => btnCopy.html(iconOrig), 2000);\r\n    });\r\n\r\n    // Init label\r\n    const labelEl = $(`<div class=\"${pfx}import-label\">${importLabel}</div>`);\r\n\r\n    // Init code viewer\r\n    codeViewer.set({\r\n        ...{\r\n            codeName: 'htmlmixed',\r\n            theme: 'hopscotch',\r\n            autoBeautify: 1,\r\n            autoCloseTags: 1,\r\n            autoCloseBrackets: 1,\r\n            styleActiveLine: 1,\r\n            smartIndent: 1,\r\n            readOnly: 1,\r\n        },\r\n        ...opts.copyViewerOptions\r\n    });\r\n\r\n    const getCode = () => {\r\n        const component = editor.getSelected();\r\n        const html = component.toHTML();\r\n        const css = editor.CodeManager.getCode(component, 'css', {\r\n            cssc: editor.CssComposer\r\n        });\r\n        const js = `\r\n                var el = document.querySelector(#${component.ccid});\r\n                var props = ${JSON.stringify(editor.getSelected().__getScriptProps())};\r\n                (${component.getScriptString()}.bind(el))(props);\r\n            `;\r\n        return `${html}<style>\\n${css}</style><script>\\n${js}</script>`;\r\n    }\r\n\r\n    cm.add('widget-code', {\r\n        run(editor) {\r\n            if (!viewerEditor) {\r\n                const txtarea = document.createElement('textarea');\r\n                container.append(labelEl);\r\n                container.append(txtarea);\r\n                container.append(btnCopy);\r\n                codeViewer.init(txtarea);\r\n                viewerEditor = codeViewer.editor;\r\n            }\r\n\r\n            modal.setTitle(opts.modalCopyTitle);\r\n            modal.setContent(container);\r\n            codeViewer.setContent(getCode());\r\n            modal.open().getModel()\r\n                .once('change:open', () => editor.stopCommand(this.id));\r\n            viewerEditor.refresh();\r\n        },\r\n\r\n        stop() {\r\n            modal.close();\r\n        }\r\n    });\r\n}","import loadComponents from './components';\nimport loadBlocks from './blocks';\nimport loadCommands from './commands';\n\nexport default (editor, opts = {}) => {\n  const options = {\n    ...{\n      // default options\n\n      // Modal title\n      modalCopyTitle: 'Widget',\n\n      // Options for extending the codeviewer\n      copyViewerOptions: {},\n\n      // Options for extending widget model\n      widgetComponent: {},\n\n      // Url for rally api\n      rallyUrl: 'https://api.rally.io/v1/',\n    }, ...opts\n  };\n  const fetch = editor.Storage.get('remote').fetch;\n\n  // Add commands\n  loadCommands(editor, options);\n\n  fetch(options.rallyUrl + 'creator_coins')\n    .then(res => res.json())\n    .then(res => {\n      options.coinsList = res;\n      // Add components\n      loadComponents(editor, options);\n      // Add blocks\n      loadBlocks(editor, options);\n    })\n    .catch(err => console.log('Error: ', err))\n};"],"sourceRoot":""}